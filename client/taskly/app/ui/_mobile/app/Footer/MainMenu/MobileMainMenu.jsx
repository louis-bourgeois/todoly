"use client";
import { usePathname } from "next/navigation";
import { useEffect, useState } from "react";
import NavigationItem from "./NavigationItem";

const AllIcon = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="31"
    height="19"
    viewBox="0 0 31 19"
    fill="none"
    className="text-text"
  >
    <path
      d="M2.25773 0.525635C1.95924 0.525635 1.66745 0.613469 1.41927 0.778029C1.17108 0.942589 0.977643 1.17648 0.863416 1.45014C0.749189 1.72379 0.719302 2.02491 0.777535 2.31542C0.835767 2.60593 0.979504 2.87278 1.19057 3.08222C1.40163 3.29167 1.67054 3.4343 1.9633 3.49209C2.25605 3.54988 2.5595 3.52022 2.83527 3.40687C3.11104 3.29352 3.34674 3.10156 3.51257 2.85528C3.67841 2.609 3.76692 2.31945 3.76692 2.02325C3.76692 1.62606 3.60791 1.24513 3.32489 0.964277C3.04186 0.683419 2.65799 0.525635 2.25773 0.525635ZM8.29449 3.52087H29.4232C29.8234 3.52087 30.2073 3.36308 30.4903 3.08222C30.7734 2.80137 30.9324 2.42044 30.9324 2.02325C30.9324 1.62606 30.7734 1.24513 30.4903 0.964277C30.2073 0.683419 29.8234 0.525635 29.4232 0.525635H8.29449C7.89423 0.525635 7.51036 0.683419 7.22733 0.964277C6.9443 1.24513 6.7853 1.62606 6.7853 2.02325C6.7853 2.42044 6.9443 2.80137 7.22733 3.08222C7.51036 3.36308 7.89423 3.52087 8.29449 3.52087ZM8.29449 8.01371C7.996 8.01371 7.70422 8.10155 7.45603 8.26611C7.20784 8.43067 7.01441 8.66456 6.90018 8.93822C6.78595 9.21187 6.75607 9.51299 6.8143 9.8035C6.87253 10.094 7.01627 10.3609 7.22733 10.5703C7.4384 10.7797 7.70731 10.9224 8.00006 10.9802C8.29282 11.038 8.59626 11.0083 8.87203 10.8949C9.1478 10.7816 9.38351 10.5896 9.54934 10.3434C9.71517 10.0971 9.80368 9.80753 9.80368 9.51133C9.80368 9.11414 9.64468 8.73321 9.36165 8.45236C9.07862 8.1715 8.69475 8.01371 8.29449 8.01371ZM14.3313 15.5018C14.0328 15.5018 13.741 15.5896 13.4928 15.7542C13.2446 15.9187 13.0512 16.1526 12.9369 16.4263C12.8227 16.7 12.7928 17.0011 12.8511 17.2916C12.9093 17.5821 13.053 17.8489 13.2641 18.0584C13.4752 18.2678 13.7441 18.4105 14.0368 18.4683C14.3296 18.526 14.633 18.4964 14.9088 18.383C15.1846 18.2697 15.4203 18.0777 15.5861 17.8314C15.7519 17.5852 15.8404 17.2956 15.8404 16.9994C15.8404 16.6022 15.6814 16.2213 15.3984 15.9404C15.1154 15.6596 14.7315 15.5018 14.3313 15.5018ZM29.4232 8.01371H14.3313C13.931 8.01371 13.5471 8.1715 13.2641 8.45236C12.9811 8.73321 12.8221 9.11414 12.8221 9.51133C12.8221 9.90852 12.9811 10.2894 13.2641 10.5703C13.5471 10.8512 13.931 11.0089 14.3313 11.0089H29.4232C29.8234 11.0089 30.2073 10.8512 30.4903 10.5703C30.7734 10.2894 30.9324 9.90852 30.9324 9.51133C30.9324 9.11414 30.7734 8.73321 30.4903 8.45236C30.2073 8.1715 29.8234 8.01371 29.4232 8.01371ZM29.4232 15.5018H20.368C19.9678 15.5018 19.5839 15.6596 19.3009 15.9404C19.0178 16.2213 18.8588 16.6022 18.8588 16.9994C18.8588 17.3966 19.0178 17.7775 19.3009 18.0584C19.5839 18.3392 19.9678 18.497 20.368 18.497H29.4232C29.8234 18.497 30.2073 18.3392 30.4903 18.0584C30.7734 17.7775 30.9324 17.3966 30.9324 16.9994C30.9324 16.6022 30.7734 16.2213 30.4903 15.9404C30.2073 15.6596 29.8234 15.5018 29.4232 15.5018Z"
      fill={"currentColor"}
    />
  </svg>
);

const CalendarIcon = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="26"
    height="29"
    viewBox="0 0 26 29"
    fill="none"
    className="text-text"
  >
    <path
      d="M23.146 3.1184H21.7341V1.70663C21.7341 0.930157 21.0988 0.294861 20.3223 0.294861C19.5458 0.294861 18.9104 0.930157 18.9104 1.70663V3.1184H7.61572V1.70663C7.61572 0.930157 6.98039 0.294861 6.20388 0.294861C5.42737 0.294861 4.79204 0.930157 4.79204 1.70663V3.1184H3.3802C1.81306 3.1184 0.570637 4.38899 0.570637 5.94194L0.556519 25.7067C0.556519 27.2596 1.81306 28.5302 3.3802 28.5302H23.146C24.699 28.5302 25.9696 27.2596 25.9696 25.7067V5.94194C25.9696 4.38899 24.699 3.1184 23.146 3.1184ZM21.7341 25.7067H4.79204C4.01553 25.7067 3.3802 25.0714 3.3802 24.2949V10.1772H23.146V24.2949C23.146 25.0714 22.5106 25.7067 21.7341 25.7067ZM7.61572 13.0008H11.8512C12.6277 13.0008 13.2631 13.6361 13.2631 14.4125V18.6479C13.2631 19.4243 12.6277 20.0596 11.8512 20.0596H7.61572C6.8392 20.0596 6.20388 19.4243 6.20388 18.6479V14.4125C6.20388 13.6361 6.8392 13.0008 7.61572 13.0008Z"
      fill={"currentColor"}
    />
  </svg>
);

const DefaultAccountIcon = () => (
  <svg
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    stroke="currentColor"
    strokeWidth="1.5"
    strokeLinecap="round"
    strokeLinejoin="round"
    className="w-3/4 h-3/4 text-text"
  >
    <circle cx="12" cy="8" r="4" stroke={"currentColor"} />
    <path d="M5 19c0-4 7-4 7-4s7 0 7 4" stroke={"currentColor"} />
  </svg>
);

export default function MobileMainMenu() {
  const pathname = usePathname();
  const [activeItem, setActiveItem] = useState("");
  useEffect(() => {
    const lastSegment = pathname.split("/").pop() || "currently";
    setActiveItem(lastSegment.toLowerCase());
  }, [pathname]);

  const menuItems = [
    { icon: CalendarIcon, label: "Currently", path: "/app/currently" },
    { icon: AllIcon, label: "All", path: "/app/all" },
    {
      icon: DefaultAccountIcon,
      label: "Profile",
      path: "/app/profile",
    },
  ];

  return (
    <div className="w-full flex items-center justify-between px-[30px] py-[8px] bg-primary shadow-shadow_01 rounded-full">
      {menuItems.map((item, index) => (
        <NavigationItem
          key={index}
          icon={item.icon}
          label={item.label}
          path={item.path}
          isActive={activeItem === item.label.toLowerCase()}
        />
      ))}
    </div>
  );
}
